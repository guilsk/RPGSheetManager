<div class="campaigns-page">
	<div class="campaigns-page__header">
		<h1 class="campaigns-page__title">Campanhas</h1>
		<p class="campaigns-page__description">Gerencie suas campanhas de RPG, seja como mestre ou jogador.</p>
	</div>

	<div class="campaigns-page__content">
		<div class="campaigns-page__actions">
			<button class="campaigns-page__button campaigns-page__button--primary" (click)="createCampaign()">Criar Nova Campanha</button>
		</div>

		<div class="campaigns-page__sections">
			<div class="campaigns-page__section">
				<h2 class="campaigns-page__section-title">Minhas Campanhas como Mestre</h2>

				<div class="campaigns-page__search">
					<app-search-bar
						[items]="myCampaigns"
						[config]="mySearchConfig"
						(searchResultsEmit)="onMySearchResults($event)">
					</app-search-bar>
				</div>

				<div class="campaigns-page__grid">
					<div class="campaign-card campaign-card--master" *ngFor="let campaign of filteredMyCampaigns">
						<div class="campaign-card__header">
							<h3 class="campaign-card__title">{{ campaign.title }}</h3>
							<span class="campaign-card__badge" [class]="campaign.activeSession ? 'campaign-card__badge--active' : 'campaign-card__badge--inactive'">
								{{ campaign.activeSession ? 'Em Sessão' : 'Pausada' }}
							</span>
						</div>
						<p class="campaign-card__system">Sistema: {{ getSystemName(campaign.systemId) }}</p>
						<p class="campaign-card__description">{{ campaign.description || 'Sem descrição' }}</p>
						<div class="campaign-card__info">
							<span>{{ campaign.playerIds.length || 0 }} jogadores</span>
						</div>
						<div class="campaign-card__actions">
							<button class="campaign-card__button campaign-card__button--secondary" (click)="viewCampaign(campaign)">Gerenciar</button>
							<button class="campaign-card__button campaign-card__button--primary" *ngIf="!campaign.activeSession"
								(click)="startSession(campaign)">Iniciar Sessão</button>
							<button class="campaign-card__button campaign-card__button--warning" *ngIf="campaign.activeSession"
								(click)="endSession(campaign)">Finalizar Sessão</button>
						</div>
					</div>

					<!-- Card para criar nova campanha -->
					<div class="new-campaign-card" (click)="createCampaign()">
						<div class="new-campaign-card__content">
							<div class="new-campaign-card__icon">+</div>
							<h3 class="new-campaign-card__title">Criar Nova Campanha</h3>
							<p class="new-campaign-card__description">Inicie uma nova aventura épica</p>
						</div>
					</div>
				</div>
			</div>

			<div class="campaigns-page__section">
				<h2 class="campaigns-page__section-title">Campanhas como Jogador</h2>

				<div class="campaigns-page__search">
					<app-search-bar
						[items]="playerCampaigns"
						[config]="playerSearchConfig"
						(searchResultsEmit)="onPlayerSearchResults($event)">
					</app-search-bar>
				</div>

				<div class="campaigns-page__grid">
					<div class="campaign-card campaign-card--player" *ngFor="let campaign of filteredPlayerCampaigns">
						<div class="campaign-card__header">
							<h3 class="campaign-card__title">{{ campaign.title }}</h3>
							<span class="campaign-card__badge" [class]="campaign.activeSession ? 'campaign-card__badge--active' : 'campaign-card__badge--inactive'">
								{{ campaign.activeSession ? 'Em Sessão' : 'Pausada' }}
							</span>
						</div>
						<p class="campaign-card__system">Sistema: {{ getSystemName(campaign.systemId) }}</p>
						<p class="campaign-card__description">{{ campaign.description || 'Sem descrição' }}</p>
						<div class="campaign-card__info">
							<span>Mestre: {{ getMasterName(campaign.masterId) }}</span>
						</div>
						<div class="campaign-card__actions">
							<button class="campaign-card__button campaign-card__button--secondary" (click)="viewCampaign(campaign)">Ver Detalhes</button>
							<button class="campaign-card__button campaign-card__button--primary" *ngIf="campaign.activeSession"
								(click)="joinSession(campaign)">Entrar na Sessão</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
