<div class="page-container">
	<div class="page-header">
		<h1>Campanhas</h1>
		<p>Gerencie suas campanhas de RPG, seja como mestre ou jogador.</p>
	</div>

	<div class="page-content">
		<div class="actions">
			<button class="btn btn-primary" (click)="createCampaign()">Criar Nova Campanha</button>
		</div>

		<div class="campaigns-section">
			<div class="section">
				<h2>Minhas Campanhas como Mestre</h2>

				<div class="search-section">
					<app-search-bar
						[items]="myCampaigns"
						[config]="mySearchConfig"
						(searchResultsEmit)="onMySearchResults($event)">
					</app-search-bar>
				</div>

				<div class="campaigns-grid">
					<div class="campaign-card master" *ngFor="let campaign of filteredMyCampaigns">
						<div class="campaign-header">
							<h3>{{ campaign.title }}</h3>
							<span class="badge" [class]="campaign.activeSession ? 'badge-active' : 'badge-inactive'">
								{{ campaign.activeSession ? 'Em Sessão' : 'Pausada' }}
							</span>
						</div>
						<p class="system">Sistema: {{ getSystemName(campaign.systemId) }}</p>
						<p class="description">{{ campaign.description || 'Sem descrição' }}</p>
						<div class="players-info">
							<span>{{ campaign.playerIds.length || 0 }} jogadores</span>
						</div>
						<div class="card-actions">
							<button class="btn btn-secondary" (click)="viewCampaign(campaign)">Gerenciar</button>
							<button class="btn btn-primary" *ngIf="!campaign.activeSession"
								(click)="startSession(campaign)">Iniciar Sessão</button>
							<button class="btn btn-warning" *ngIf="campaign.activeSession"
								(click)="endSession(campaign)">Finalizar Sessão</button>
						</div>
					</div>

					<!-- Card para criar nova campanha -->
					<div class="campaign-card new-campaign-card" (click)="createCampaign()">
						<div class="new-campaign-content">
							<div class="new-campaign-icon">+</div>
							<h3>Criar Nova Campanha</h3>
							<p>Inicie uma nova aventura épica</p>
						</div>
					</div>
				</div>
			</div>

			<div class="section">
				<h2>Campanhas como Jogador</h2>

				<div class="search-section">
					<app-search-bar
						[items]="playerCampaigns"
						[config]="playerSearchConfig"
						(searchResultsEmit)="onPlayerSearchResults($event)">
					</app-search-bar>
				</div>

				<div class="campaigns-grid">
					<div class="campaign-card player" *ngFor="let campaign of filteredPlayerCampaigns">
						<div class="campaign-header">
							<h3>{{ campaign.title }}</h3>
							<span class="badge" [class]="campaign.activeSession ? 'badge-active' : 'badge-inactive'">
								{{ campaign.activeSession ? 'Em Sessão' : 'Pausada' }}
							</span>
						</div>
						<p class="system">Sistema: {{ getSystemName(campaign.systemId) }}</p>
						<p class="description">{{ campaign.description || 'Sem descrição' }}</p>
						<div class="players-info">
							<span>Mestre: {{ getMasterName(campaign.masterId) }}</span>
						</div>
						<div class="card-actions">
							<button class="btn btn-secondary" (click)="viewCampaign(campaign)">Ver Detalhes</button>
							<button class="btn btn-primary" *ngIf="campaign.activeSession"
								(click)="joinSession(campaign)">Entrar na Sessão</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
