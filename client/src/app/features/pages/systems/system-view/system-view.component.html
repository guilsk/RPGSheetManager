<div class="system-view">
	<div class="system-view__header">
		<button class="system-view__btn system-view__btn--secondary system-view__back-button" (click)="goBack()">
			‚Üê Voltar aos Sistemas
		</button>

		<div class="system-view__info" *ngIf="system">
			<h1 class="system-view__title">{{ system.name }}</h1>
			<p class="system-view__description">{{ system.description }}</p>

			<div class="system-view__meta">
				<div class="system-view__meta-item">
					<span class="system-view__meta-label">Criado por:</span>
					<span class="system-view__meta-value">{{ getOwnerDisplayName() }}</span>
				</div>
				<div class="system-view__meta-item">
					<span class="system-view__meta-label">Data de Cria√ß√£o:</span>
					<span class="system-view__meta-value">{{ system.createdAt | date:'dd/MM/yyyy' }}</span>
				</div>
				<div class="system-view__meta-item">
					<span class="system-view__meta-label">Total de Campos:</span>
					<span class="system-view__meta-value">{{ getSystemFieldsCount() }}</span>
				</div>
				<div class="system-view__meta-item">
					<span class="system-view__meta-label">Categorias:</span>
					<span class="system-view__meta-value">{{ getSystemCategoriesCount() }}</span>
				</div>
			</div>
		</div>
	</div>

	<!-- Loading -->
	<div class="system-view__loading-container" *ngIf="loading">
		<div class="system-view__loading-content">
			<div class="system-view__loading-spinner">‚è≥</div>
			<p>Carregando sistema...</p>
		</div>
	</div>

	<!-- Template Preview -->
	<div class="system-view__template" *ngIf="categories.length > 0 && !loading">
		<div class="system-view__template-header">
			<h2 class="system-view__template-title">Template do Sistema</h2>
			<p class="system-view__template-description">Visualiza√ß√£o dos campos que ser√£o criados para personagens deste sistema.</p>
		</div>

		<!-- Categorias de dados -->
		<div class="system-view__category-section" *ngFor="let category of categories">
			<h3 class="system-view__category-title">{{ category }}</h3>

			<div class="system-view__fields-grid">
				<div class="system-view__field-container" *ngFor="let field of categorizedData[category]"
					[class.system-view__field-container--hidden]="!field.visible">

					<app-dynamic-field [field]="field" [disabled]="!isSelectField(field)" [previewMode]="true"
						[allFieldValues]="getAllFieldValues()">
					</app-dynamic-field>
				</div>
			</div>
		</div>
	</div>

	<!-- Empty State -->
	<div class="system-view__empty-state" *ngIf="categories.length === 0 && !loading && system">
		<div class="system-view__empty-icon">üìã</div>
		<h3 class="system-view__empty-title">Sistema sem Template</h3>
		<p class="system-view__empty-description">Este sistema n√£o possui um template definido.</p>
	</div>

	<!-- Sistema n√£o encontrado -->
	<div class="system-view__empty-state" *ngIf="!system && !loading">
		<div class="system-view__empty-icon">‚ùå</div>
		<h3 class="system-view__empty-title">Sistema n√£o encontrado</h3>
		<p class="system-view__empty-description">O sistema solicitado n√£o existe ou foi removido.</p>
		<button class="system-view__btn system-view__btn--secondary" (click)="goBack()">
			‚Üê Voltar aos Sistemas
		</button>
	</div>
</div>
