<div class="system-view-container">
	<div class="page-header">
		<button class="btn btn-secondary back-button" (click)="goBack()">
			‚Üê Voltar aos Sistemas
		</button>

		<div class="system-info" *ngIf="system">
			<h1>{{ system.name }}</h1>
			<p class="system-description">{{ system.description }}</p>

			<div class="system-meta">
				<div class="meta-item">
					<span class="label">Criado por:</span>
					<span class="value">{{ getOwnerDisplayName() }}</span>
				</div>
				<div class="meta-item">
					<span class="label">Data de Cria√ß√£o:</span>
					<span class="value">{{ system.createdAt | date:'dd/MM/yyyy' }}</span>
				</div>
				<div class="meta-item">
					<span class="label">Total de Campos:</span>
					<span class="value">{{ getSystemFieldsCount() }}</span>
				</div>
				<div class="meta-item">
					<span class="label">Categorias:</span>
					<span class="value">{{ getSystemCategoriesCount() }}</span>
				</div>
			</div>
		</div>
	</div>

	<!-- Loading -->
	<div class="loading-container" *ngIf="loading">
		<div class="loading-content">
			<div class="loading-spinner">‚è≥</div>
			<p>Carregando sistema...</p>
		</div>
	</div>

	<!-- Template Preview -->
	<div class="system-template" *ngIf="categories.length > 0 && !loading">
		<div class="template-header">
			<h2>Template do Sistema</h2>
			<p>Visualiza√ß√£o dos campos que ser√£o criados para personagens deste sistema.</p>
		</div>

		<!-- Categorias de dados -->
		<div class="category-section" *ngFor="let category of categories">
			<h3>{{ category }}</h3>

			<div class="fields-grid">
				<div class="field-container" *ngFor="let field of categorizedData[category]"
					[class.field-hidden]="!field.visible">

					<app-dynamic-field [field]="field" [disabled]="!isSelectField(field)" [previewMode]="true"
						[allFieldValues]="getAllFieldValues()">
					</app-dynamic-field>
				</div>
			</div>
		</div>
	</div>

	<!-- Empty State -->
	<div class="empty-state" *ngIf="categories.length === 0 && !loading && system">
		<div class="empty-icon">üìã</div>
		<h3>Sistema sem Template</h3>
		<p>Este sistema n√£o possui um template definido.</p>
	</div>

	<!-- Sistema n√£o encontrado -->
	<div class="empty-state" *ngIf="!system && !loading">
		<div class="empty-icon">‚ùå</div>
		<h3>Sistema n√£o encontrado</h3>
		<p>O sistema solicitado n√£o existe ou foi removido.</p>
		<button class="btn btn-secondary" (click)="goBack()">
			‚Üê Voltar aos Sistemas
		</button>
	</div>
</div>
