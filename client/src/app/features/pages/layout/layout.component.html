<div class="app-layout">
	<header class="app-header">
		<div class="app-header__content">
			<h1 class="app-header__logo">
				<a class="app-header__logo-link" routerLink="/">RPG Sheet Manager</a>
			</h1>

			<nav class="app-nav" *ngIf="auth.isAuthenticated$ | async">
				<a class="app-nav__link" routerLink="/characters" routerLinkActive="app-nav__link--active">Personagens</a>
				<a class="app-nav__link" routerLink="/systems" routerLinkActive="app-nav__link--active">Sistemas</a>
				<a class="app-nav__link" routerLink="/campaigns" routerLinkActive="app-nav__link--active">Campanhas</a>
			</nav>

			<div class="app-header__auth">
				<ng-container *ngIf="auth.isAuthenticated$ | async; else loginSection">
					<div class="app-user">
						<span class="app-user__name">{{ (currentUserService.currentUser$ | async)?.displayName || 'Carregando...' }}</span>
						<a class="app-user__button app-user__button--outline" routerLink="/profile" title="Meu Perfil">
							ðŸ‘¤ Perfil
						</a>
						<button class="app-user__button app-user__button--secondary" (click)="auth.logout()">
							Logout
						</button>
					</div>
				</ng-container>

				<ng-template #loginSection>
					<button class="app-header__button app-header__button--primary" (click)="auth.loginWithRedirect()">
						Login
					</button>
				</ng-template>
			</div>
		</div>
	</header>

	<main class="app-main">
		<router-outlet></router-outlet>
	</main>

	<!-- Dialog Global -->
	<app-dialog [config]="(dialogService.dialog$ | async)?.config!"
		[isVisible]="(dialogService.dialog$ | async)?.isVisible || false" (confirmed)="onDialogConfirmed($event)"
		(closed)="onDialogClosed()">
	</app-dialog>
</div>
